{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "required": [
    "creationDateTime",
    "senderBusinessId"
  ],
  "definitions": {
    "account": {
      "type": "object",
      "description": "Account",
      "required": [
        "id",
        "openingDate",
        "roles"
      ],
      "properties": {
        "id": { "$ref": "#/definitions/accountIdentification" },
        "openingDate": {
          "description": "Account opening date.",
          "$ref": "#/definitions/date"
        },
        "closingDate": {
          "description": "Account closing date.",
          "$ref": "#/definitions/date"
        },
        "roles": {
          "type": "array",
          "description": "Account related roles.",
          "items": { "$ref": "#/definitions/role" }
        }
      }
    },
    "accountIdentification": {
      "type": "object",
      "description": "Account identification.",
      "oneOf": [
        {
          "required": [
            "iban"
          ]
        },
        {
          "required": [
            "other"
          ]
        }
      ],
      "properties": {
        "iban": {
          "type": "string",
          "description": "IBAN account number.",
          "examples": [
            "FI2753564444694907"
          ]
        },
        "other": { "$ref": "#/definitions/otherAccountIdentification" }
      }
    },
    "businessId": {
      "type": "string",
      "description": "Business id (Y-tunnus)",
      "examples": [
        "0245442-8"
      ],
      "minLength": 9,
      "maxLength": 9,
      "pattern": "[0-9]{7}[-][0-9]"
    },
    "customer": {
      "type": "object",
      "description": "Customer",
      "required": [
        "startDate"
      ],
      "properties": {
        "startDate": {
          "description": "Customer start date.",
          "$ref": "#/definitions/date"
        },
        "endDate": {
          "description": "Customer end date.",
          "$ref": "#/definitions/date"
        }
      }
    },
    "date": {
      "type": "string",
      "examples": [
        "2019-08-17"
      ]
    },
    "legalPerson": {
      "type": "object",
      "description": "Legal person which is always either a natural person (privatePerson) or a juridical person (organisation).",
      "properties": {
        "organisation": { "$ref": "#/definitions/organisation" },
        "privatePerson": { "$ref": "#/definitions/privatePerson" }
      },
      "oneOf": [
        {
          "required": [
            "organisation"
          ]
        },
        {
          "required": [
            "privatePerson"
          ]
        }
      ]
    },
    "organisation": {
      "type": "object",
      "description": "Juridical person.",
      "oneOf": [
        {
          "required": [
            "businessId",
            "businessIdCountryCode",
            "roles"
          ]
        },
        {
          "required": [
            "otherOrganisationId",
            "roles"
          ]
        }
      ],
      "properties": {
        "businessId": { "$ref": "#/definitions/businessId" },
        "businessIdCountryCode": {
          "type": "string",
          "description": "If businessId is a Finnish business id (Y-tunnus) businessIdCountryCode value is set to “FI”. If Finnish business id or equivalent is not available, anotherOrganizationId has to be provided.",
          "examples": [
            "FI"
          ],
          "minLength": 2,
          "maxLength": 2
        },
        "registrationAuthority": {
          "type": "string",
          "description": "Registration authority."
        },
        "registrationDate": {
          "description": "Registration date.",
          "$ref": "#/definitions/date"
        },
        "roles": {
          "type": "array",
          "description": "Beneficiaries. Role type has to be beneficiary.",
          "items": { "$ref": "#/definitions/role" }
        },
        "name": {
          "type": "string",
          "description": "Organisation name."
        },
        "otherOrganisationId": { "$ref": "#/definitions/otherOrganisationId" }
      }
    },
    "otherAccountIdentification": {
      "type": "object",
      "description": "Other than IBAN account number.",
      "required": [
        "id",
        "description"
      ],
      "properties": {
        "id": {
          "type": "string",
          "description": "Account identification."
        },
        "description": {
          "type": "string",
          "description": "Description of the used account identification type."
        }
      }
    },
    "otherOrganisationId": {
      "type": "object",
      "description": "Other organisation identification (used when Finnish business id (Y-tunnus) is not available).",
      "required": [
        "id",
        "description"
      ],
      "properties": {
        "id": {
          "type": "string",
          "title": "Id",
          "description": "Other organisation identification."
        },
        "description": {
          "type": "string",
          "title": "Description",
          "description": "Description of the used organisation identification type."
        }
      }
    },
    "privatePerson": {
      "type": "object",
      "description": "Natural person.",
      "oneOf": [
        {
          "required": [
            "lastName",
            "firstNames",
            "birthdate",
            "nationality",
            "hetu"
          ]
        },
        {
          "required": [
            "lastName",
            "firstNames",
            "birthdate",
            "nationality",
            "identificationDocumentId"
          ]
        }
      ],
      "properties": {
        "lastName": {
          "type": "string",
          "description": "Last name.",
          "examples": [
            "Korhonen"
          ]
        },
        "firstNames": {
          "type": "string",
          "description": "First names.",
          "examples": [
            "Juhani Antti"
          ]
        },
        "birthdate": {
          "description": "Date of birth.",
          "$ref": "#/definitions/date"
        },
        "nationality": {
          "type": "string",
          "description": "Nationality",
          "examples": [
            "FI"
          ],
          "minLength": 2,
          "maxLength": 2
        },
        "hetu": {
          "type": "string",
          "description": "Personal identity code (Finnish hetu).",
          "examples": [
            "151080-999L"
          ]
        },
        "identificationDocumentId": {
          "type": "string",
          "description": "Identification document (e.g passport) identifier (used when Finnish personal identity code (hetu) is not available)."
        }
      }
    },
    "role": {
      "type": "object",
      "description": "Role",
      "required": [
        "startDate",
        "type",
        "legalPersonId"
      ],
      "properties": {
        "startDate": {
          "description": "Role start date.",
          "$ref": "#/definitions/date"
        },
        "endDate": {
          "description": "Role end date.",
          "$ref": "#/definitions/date"
        },
        "type": {
          "type": "string",
          "description": "Role type.",
          "enum": ["owner", "access", "beneficiary"]
        },
        "legalPersonId": {
          "description": "Legal person identifier",
          "$ref": "#/definitions/uuidv4"
        }
      }
    },
    "safetyDepositBox": {
      "type": "object",
      "description": "Safety deposit box.",
      "required": [
        "id",
        "startDate",
        "roles"
      ],
      "properties": {
        "id": {
          "type": "string",
          "description": "Safety deposit box identifier.",
          "examples": [
            "OKOYFIHH-41138848"
          ]
        },
        "startDate": {
          "description": "Safety deposit box start date.",
          "$ref": "#/definitions/date"
        },
        "endDate": {
          "description": "Safety deposit box end date.",
          "$ref": "#/definitions/date"
        },
        "roles": {
          "type": "array",
          "description": "Safety deposit box related roles.",
          "items": { "$ref": "#/definitions/role" }
        }
      }
    },
    "uuidv4": {
      "type": "string",
      "description": "Unambiguous identifier used for record. UUIDv4.",
      "examples": [
        "91e8c532-71e1-4c4f-bf30-ceec6160ece0"
      ]
    }
  },
  "properties": {
    "creationDateTime": {
      "$id": "#/properties/creationDateTime",
      "description": "Creation date of the message.",
      "$ref": "#/definitions/date"
    },
    "senderBusinessId": {
      "$id": "#/properties/senderBusinessId",
      "description": "Sender business id (Y-tunnus).",
      "$ref": "#/definitions/businessId"
    },
    "legalPersons": {
      "$id": "#/properties/legalPersons",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/legalPerson"
      },
      "description": "Legal persons."
    },
    "customers": {
      "$id": "#/properties/customers",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/customer"
      },
      "description": "Customers"
    },
    "accounts": {
      "$id": "#/properties/accounts",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/account"
      },
      "description": "Accounts"
    },
    "safetyDepositBoxes": {
      "$id": "#/properties/safetyDepositBoxes",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/safetyDepositBox"
      },
      "description": "Safety deposit boxes."
    }
  }
}